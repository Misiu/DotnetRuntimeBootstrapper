<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" TreatAsLocalProperty="TaskAssembly" >

    <PropertyGroup>
        <TaskAssembly Condition="'$(MSBuildRuntimeType)' == 'Core'">$(MSBuildThisFileDirectory)/bin/$(Configuration)/netstandard2.0/$(MSBuildThisFileName).dll</TaskAssembly>
        <TaskAssembly Condition="'$(MSBuildRuntimeType)' != 'Core'">$(MSBuildThisFileDirectory)/bin/$(Configuration)/net472/$(MSBuildThisFileName).dll</TaskAssembly>
    </PropertyGroup>

    <UsingTask TaskName="$(MSBuildThisFileName).CreateBootstrapperTask" AssemblyFile="$(TaskAssembly)" />

    <Target Name="CreateBootstrapper" AfterTargets="Build">
        <!-- TODO: properly resolve runtime name/version -->
        <CreateBootstrapperTask
                TargetApplicationName="$(AssemblyName)"
                TargetExecutableFilePath="$(OutputPath)/$(AssemblyName).dll"
                TargetRuntimeName="Microsoft.WindowsDesktop.App"
                TargetRuntimeVersion="3.1.15"
        />
    </Target>

</Project>